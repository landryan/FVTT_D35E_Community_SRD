{
	"_id": "a0N1WQvGp9DfbqtS",
	"_key": "!macros!a0N1WQvGp9DfbqtS",
	"author": "Wh2LMImbzawNAQ7v",
	"command": "async function AddCoins() {\n  // Prompt for the amount of gold to add\n  new Dialog({\n    title: \"Add Coins\",\n    content: `<p>Enter the amount of platinum to add:</p><input type=\"number\" id=\"platinumAmount\" value=\"0\">\n    <p>Enter the amount of gold to add:</p><input type=\"number\" id=\"goldAmount\" value=\"0\">\n    <p>Enter the amount of silver to add:</p><input type=\"number\" id=\"silverAmount\" value=\"0\">\n    <p>Enter the amount of copper to add:</p><input type=\"number\" id=\"copperAmount\" value=\"0\">\n    <p><label for=\"weightless\"><input type=\"checkbox\" id=\"weightless\" value=\"no\">Add Weightless?</label>\n    `,\n    buttons: {\n      add: {\n        icon: '<i class=\"fas fa-money-bill-wave\"></i>',\n        label: \"Add Coins\",\n        callback: (html) => {\n          const platinumAmount = parseInt(\n            html.find(\"#platinumAmount\")[0].value\n          );\n          const goldAmount = parseInt(html.find(\"#goldAmount\")[0].value);\n          const silverAmount = parseInt(html.find(\"#silverAmount\")[0].value);\n          const copperAmount = parseInt(html.find(\"#copperAmount\")[0].value);\n\n          // Check if the input is a valid number\n          if (isNaN(platinumAmount)) {\n            ui.notifications.error(\n              \"Invalid platinum amount. Please enter a number.\"\n            );\n            return;\n          }\n          if (isNaN(goldAmount)) {\n            ui.notifications.error(\n              \"Invalid gold amount. Please enter a number.\"\n            );\n            return;\n          }\n          if (isNaN(silverAmount)) {\n            ui.notifications.error(\n              \"Invalid silver amount. Please enter a number.\"\n            );\n            return;\n          }\n          if (isNaN(copperAmount)) {\n            ui.notifications.error(\n              \"Invalid copper amount. Please enter a number.\"\n            );\n            return;\n          }\n\n          // Get the selected actor\n          let token = canvas.tokens.controlled[0];\n          let actor = token.actor;\n\n          let id = actor.id;\n          let character = game.actors.get(id);\n          console.log(\"Name:\", character.name);\n\n          const weightlessChecked =\n            document.querySelector(\"#weightless:checked\") !== null;\n          if (weightlessChecked === true) {\n            // Update the weightless currency on the actor's sheet.\n\n            // Weightless Platinum\n            let currentppCurrency = actor.system.altCurrency.pp || 0;\n            let newppCurrency = parseInt(currentppCurrency) + parseInt(platinumAmount);\n\n            // Weightless Gold\n            let currentgpCurrency = actor.system.altCurrency.gp || 0;\n            let newgpCurrency = parseInt(currentgpCurrency) + parseInt(goldAmount);\n\n            // Weightless Silver\n            let currentspCurrency = actor.system.altCurrency.sp || 0;\n            let newspCurrency = parseInt(currentspCurrency) + parseInt(silverAmount);\n\n            // Weightless Copper\n            let currentcpCurrency = actor.system.altCurrency.cp || 0;\n            let newcpCurrency = parseInt(currentcpCurrency) + parseInt(copperAmount);\n\n            actor.update({\n              \"system.altCurrency.pp\": newppCurrency,\n              \"system.altCurrency.gp\": newgpCurrency,\n              \"system.altCurrency.sp\": newspCurrency,\n              \"system.altCurrency.cp\": newcpCurrency,\n            });\n          } else {\n            // Update the normal currency on the actor's sheet.\n\n            // Normal Platinum\n            let currentppCurrency = actor.system.currency.pp || 0;\n            let newppCurrency = parseInt(currentppCurrency) + parseInt(platinumAmount);\n\n            // Normal Gold\n            let currentgpCurrency = actor.system.currency.gp || 0;\n            let newgpCurrency = parseInt(currentgpCurrency) + parseInt(goldAmount);\n\n            // Normal Silver\n            let currentspCurrency = actor.system.currency.sp || 0;\n            let newspCurrency = parseInt(currentspCurrency) + parseInt(silverAmount);\n\n            // Normal Copper\n            let currentcpCurrency = actor.system.currency.cp || 0;\n            let newcpCurrency = parseInt(currentcpCurrency) + parseInt(copperAmount);\n\n            actor.update({\n              \"system.currency.pp\": newppCurrency,\n              \"system.currency.gp\": newgpCurrency,\n              \"system.currency.sp\": newspCurrency,\n              \"system.currency.cp\": newcpCurrency,\n            });\n          }\n\n          // Optionally, display a message in the chat log\n          ChatMessage.create({\n            user: game.user._id,\n            speaker: ChatMessage.getSpeaker({ actor: actor }),\n            content: `${actor.name} gains ${platinumAmount} platinum.\n            <p>${actor.name} gains ${goldAmount} gold.\n            <p>${actor.name} gains ${silverAmount} silver.\n            <p>${actor.name} gains ${copperAmount} copper.\n            `,\n          });\n        },\n      },\n      cancel: {\n        icon: '<i class=\"fas fa-times\"></i>',\n        label: \"Cancel\",\n      },\n    },\n  }).render(true);\n}\n// Check if a token is selected\nif (canvas.tokens.controlled.length === 0) {\n  ui.notifications.warn(\"Please select a token.\");\n  return;\n} else {\n  AddCoins();\n}",
	"folder": null,
	"img": "https://abrpgfoundrybucket.s3.eu-west-2.amazonaws.com/Generic%20Assets/icons/commodities/currency/coin-embossed-crown-gold.webp",
	"name": "Add Coins",
	"scope": "global",
	"type": "script"
}
